<!DOCTYPE html>
<meta charset="utf-8">
<title>Ambient Light Events IDL tests</title>
<link rel="author" title="Intel" href="http://www.intel.com">
<link rel="help" href="http://www.w3.org/TR/ambient-light/">
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
<script src="/webidl2.js/lib/webidl2.js"></script>
<script src="/resources/idlharness.js"></script>
<style>
  pre {
    display: none;
  }
</style>
<div id="log"></div>

<pre id="untested_idl">
interface Window {
};

interface Event {
};

dictionary EventInit {
};
</pre>

<pre id='idl'>
partial interface Window {
                attribute EventHandler ondevicelight;
                attribute EventHandler onlightlevel;
};

dictionary DeviceLightEventInit : EventInit {
    unrestricted double value;
};

[Constructor (DOMString type, optional DeviceLightEventInit eventInitDict)]
interface DeviceLightEvent : Event {
    readonly    attribute unrestricted double value;
};

enum LightLevelState {
    "‚Äç",
    "dim",
    "normal",
    "bright"
};

dictionary LightLevelEventInit : EventInit {
    LightLevelState value;
};

[Constructor (DOMString type, optional LightLevelEventInit eventInitDict)]
interface LightLevelEvent : Event {
    readonly    attribute LightLevelState value;
};
</pre>

<script>
(function() {
  "use strict";
  var idl_array = new IdlArray();
  // replace 'EventHandler' and 'unrestricted double' unrecognised by idlharness.js
  var idls = document.getElementById('idl').textContent.replace('EventHandler', 'Function?', 'g').replace('unrestricted double', 'double', 'g');

  idl_array.add_untested_idls(document.getElementById('untested_idl').textContent);
  idl_array.add_idls(idls);

  idl_array.add_objects({
    Window: ['window'],
    DeviceLightEvent: ['new DeviceLightEvent("foo")'],
    LightLevelEvent: ['new LightLevelEvent("foo")']
  });

  idl_array.test();
})();
</script>

